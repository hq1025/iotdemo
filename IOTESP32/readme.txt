
提示词：
阅读当前程序，连接网络后在ESP32-S3芯片基于Micropython程序采集芯片片内温度通过MQTT发布消息，订阅一个Topic消息。根据消息内容控制接在PIN48脚上的WS2812B三色LED的颜色和亮灭，驱动是NeoPixel。不要使用umqtt.simple库，用定义MQTT客户端实现通行。


控制测试：
{"r": 255, "g": 0, "b": 0, "brightness": }
纯绿色显示，不加亮度参数
{"r": 255, "g": 0, "b": 0}
纯绿色显示，亮度参数控制
{"r": 0, "g": 255, "b": 0，"brightness": 0.8}

===========================================
开发一个基于ESP32-S3芯片的MicroPython程序，实现以下完整功能：

1. 网络连接功能：
   - 实现稳定的WiFi连接
   - 包含网络连接异常处理机制
   - 支持自动重连功能

2. 温度采集功能：
   - 读取芯片片内温度传感器数据
   - 设置合理的采样频率(建议1Hz)
   - 包含温度数据格式转换和校验

3. MQTT通信功能：
   - 建立MQTT客户端连接
   - 实现以下MQTT功能：
     * 发布功能：将温度数据发布到指定Topic
     * 订阅功能：订阅控制Topic接收指令
   - 包含MQTT连接状态监控
   - 实现QoS等级设置(建议QoS1)

4. WS2812B LED控制功能：
   - 在PIN48脚上初始化NeoPixel驱动
   - 实现以下LED控制功能：
     * 根据订阅消息内容解析RGB颜色值
     * 控制LED亮灭状态
     * 支持亮度调节
   - 包含非法颜色值处理机制

5. 系统集成要求：
   - 实现各功能模块的协同工作
   - 设计合理的程序架构
   - 包含完善的异常处理
   - 添加必要的调试日志输出

6. 性能要求：
   - 确保温度采集和发布的实时性
   - 保持MQTT消息传输的可靠性
   - 实现LED控制的低延迟响应

7. 安全考虑：
   - 实现MQTT连接认证
   - 对控制消息进行合法性验证
   - 防止缓冲区溢出等安全问题